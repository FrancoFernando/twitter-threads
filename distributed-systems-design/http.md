HTTP servers hosts both static and dynamic resources.

HTTP caching allow to store static resources on client side bringing many benefits like:

- reduced load on the servers
- reduced response time for the users

How does client side HTTP caching works ?

//Thread// {1/9}



HTTP servers host 2 types of resources:

1. static, containing data that don't change between two different requests

2. dynamic, containing data generated by the server on the fly for each request

Since static resources don't change, they can be cached.

{2/9}

Usually the first thing that comes into mind while talking about cache is server side caching.

But HTTP protocol allows also to easily implement caching client side.

All what it's required is using some specific HTTP headers.

{3/9}

Let's suppose the client makes a GET request for a resource that hasn't be accessed before.

The local client cache intercepts the request.

Since the resource is not there, the cache requests it to the origin server on behalf of the client.

{4/9}

The server informs the client that a resource can be cached using dedicated HTTP response headers.

The Cache-control specifies how long the resource can be cached.

The ETag identify a specific version of a resource.

{5/9}

When the cache receives the response from the server, it cache the resource returning it to the client.

Let's now suppose that after some time the client makes the same GET request.

If the resource is not yet expired, the local cache returns it to the client at once.

{6/9}

Clearly the server can update a not yet expired resource.

So resources in the cache and in the server are not strongly consistent.

But this is usually an acceptable trade-off.

And a server can always force clients to fetch an updated resource changing its version.

{7/9}

If a requested resource is expired, the local cache sends a new request to the origin server.

The request has a conditional HTTP header like If-None-Match specifying the version of the resource stored in the cache.

{8/9}

At this poit there are 2 possibilities.

If the server has a new version, it returns it, otherwise it replies with a 304 Not Modified status code.

In this case the resource freshness is renewed and the cache returns the already stored resource.

{9/9}
